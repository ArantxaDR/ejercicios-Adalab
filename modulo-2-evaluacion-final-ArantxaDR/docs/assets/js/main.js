"use strict";let favList=[];const favSeries=function(e){const t=parseInt(e.currentTarget.id),i=tvSeries[t],s=favList.indexOf(i);!1===(-1!==s)?favList.push(i):favList.splice(s,1),setLocalStorage(),paintSeries(),paintFav()};function listenSeries(){const e=document.querySelectorAll(".js-serie-container");for(const t of e)t.addEventListener("click",favSeries)}const favSeriesContainer=document.querySelector(".js-list");function paintFav(){let e="";for(let t=0;t<favList.length;t++)e+=`<li class="js-fav-item js-fav${t} fav_list_item">`,e+=`<button class="fav_list_delete js-delete-btn" id="${t}" title="Borrar">`,e+='<i class="fav_list_delete_icon fas fa-times"></i>',e+="</button>",e+=`<p class="fav_name" >${favList[t].name}</p>`,null===favList[t].image?e+='<img  class="img_list" src= "//via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="Show TV image"/>':e+=`<img class="img_list" src="${favList[t].image.medium}" alt="Show TV image"/>`,e+="</li>";favSeriesContainer.innerHTML=e,favList.length>0&&listenerDelete()}function setLocalStorage(){localStorage.setItem("favList",JSON.stringify(favList))}function getLocalStorage(){const e=JSON.parse(localStorage.getItem("favList"));favList=null!==e?e:[]}getLocalStorage();let tvSeries=[];const tvContainer=document.querySelector(".js-tvSeries"),btn=document.querySelector(".js-btn");function getSeries(e){e.preventDefault();const t=document.querySelector(".js-input").value;fetch(`//api.tvmaze.com/search/shows?q="${t}"`).then(e=>e.json()).then((function(e){for(let t=0;t<e.length;t++)tvSeries[t]=e[t].show,paintSeries()}))}function paintSeries(){let e="";for(let t=0;t<tvSeries.length;t++){let i;const s=favList.find(e=>e.id===tvSeries[t].id);i=!0===(-1!==favList.indexOf(s))?"serie_container_fav":"",e+=`<div class="serie_container ${i} js-serie-container" id="${t}">`,e+=`<p>${tvSeries[t].name}</p>`,null===tvSeries[t].image?e+='<img class ="img_main" src= "//via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="Show TV image"/>':e+=`<img  class ="img_main" src="${tvSeries[t].image.medium}" alt="Show TV image"/>`,e+="</div>"}tvContainer.innerHTML=e,tvSeries.length>0&&listenSeries()}function removeFavourite(e){const t=parseInt(e.currentTarget.id),i=favList[t],s=favList.indexOf(i);favList.splice(s,1),setLocalStorage(),paintSeries(),paintFav()}function listenerDelete(){const e=document.querySelectorAll(".js-delete-btn");for(const t of e)t.addEventListener("click",removeFavourite)}getLocalStorage(),paintFav(),btn.addEventListener("click",getSeries);const deleteAllBtn=document.querySelector(".js-delete-all");function deleteAll(){favList=[],localStorage.clear(),paintFav(),getSeries()}deleteAllBtn.addEventListener("click",deleteAll);